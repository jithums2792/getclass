/**
 * @author davidshen84
 */
import * as tslib_1 from "tslib";
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MathJaxDirective } from './math-jax.directive';
import { MathJaxService } from './math-jax.service';
/**
 * Module configuration class.
 *
 * @example
 *
 * {
 *   version: '2.7.5',
 *   config: 'TeX-AMS_HTML',
 *   hostname: 'cdnjs.cloudflare.com'
 * }
 */
var ModuleConfiguration = /** @class */ (function () {
    function ModuleConfiguration() {
    }
    return ModuleConfiguration;
}());
export { ModuleConfiguration };
/**
 * Module to load and configure the MathJax library.
 *
 * @example
 *
 * MathJaxModule.config(
 * {
 *     version: '2.7.5',
 *     config: 'TeX-AMS_HTML',
 *     hostname: 'cdnjs.cloudflare.com'
 * })
 */
var MathJaxModule = /** @class */ (function () {
    function MathJaxModule(service, moduleConfig) {
        service.init();
        /**
         * Define the **function string** to be inserted into the mathjax configuration script block.
         */
        var mathJaxHubConfig = (function () {
            MathJax.Hub.Config({
                skipStartupTypeset: true,
                messageStyle: 'none',
                tex2jax: { preview: 'none' }
            });
            MathJax.Hub.Register.StartupHook('End', function () {
                window.mathJaxHub$.next();
                window.mathJaxHub$.complete();
            });
        }).toString();
        if (moduleConfig) {
            /**
             * Insert the MathJax configuration script into the Head element.
             */
            (function () {
                var script = document.createElement('script');
                script.type = 'text/x-mathjax-config';
                script.text = "(" + mathJaxHubConfig + ")();";
                document.getElementsByTagName('head')[0].appendChild(script);
            })();
            /**
             * Insert the script block to load the MathJax library.
             */
            (function (version, config, hostname) {
                var script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = "https://" + hostname + "/ajax/libs/mathjax/" + version + "/MathJax.js?config=" + config;
                script.async = true;
                document.getElementsByTagName('head')[0].appendChild(script);
            })(moduleConfig.version, moduleConfig.config, moduleConfig.hostname);
        }
    }
    MathJaxModule_1 = MathJaxModule;
    /**
     * Configure the provider for hte module.
     *
     * @deprecated Use forRoot or forChild method instead.
     * @param forRoot Make sure it is set to `true` for the root module and `false` for any child module.
     * @param moduleConfiguration A {ModuleConfiguration} instance.
     */
    MathJaxModule.config = function (forRoot, moduleConfiguration) {
        if (forRoot === void 0) { forRoot = true; }
        if (moduleConfiguration === void 0) { moduleConfiguration = {
            version: '2.7.5',
            config: 'TeX-AMS_HTML',
            hostname: 'cdnjs.cloudflare.com'
        }; }
        return forRoot ? {
            ngModule: MathJaxModule_1,
            providers: [
                { provide: ModuleConfiguration, useValue: moduleConfiguration },
                { provide: MathJaxService, useClass: MathJaxService },
            ]
        } : {
            ngModule: MathJaxModule_1
        };
    };
    /**
     * Configure the module for the root module.
     *
     * @param moduleConfiguration A {ModuleConfiguration} instance.
     */
    MathJaxModule.forRoot = function (moduleConfiguration) {
        if (moduleConfiguration === void 0) { moduleConfiguration = {
            version: '2.7.5',
            config: 'TeX-AMS_HTML',
            hostname: 'cdnjs.cloudflare.com'
        }; }
        return {
            ngModule: MathJaxModule_1,
            providers: [
                { provide: ModuleConfiguration, useValue: moduleConfiguration },
                { provide: MathJaxService, useClass: MathJaxService },
            ]
        };
    };
    /**
     * Configure the module for a child module.
     */
    MathJaxModule.forChild = function () {
        return {
            ngModule: MathJaxModule_1
        };
    };
    var MathJaxModule_1;
    MathJaxModule = MathJaxModule_1 = tslib_1.__decorate([
        NgModule({
            declarations: [MathJaxDirective],
            imports: [
                CommonModule
            ],
            exports: [MathJaxDirective]
        }),
        tslib_1.__metadata("design:paramtypes", [MathJaxService, ModuleConfiguration])
    ], MathJaxModule);
    return MathJaxModule;
}());
export { MathJaxModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0aC1qYXgubW9kdWxlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LW1hdGhqYXgvIiwic291cmNlcyI6WyJzcmMvYXBwL21hdGgtamF4L21hdGgtamF4Lm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRzs7QUFFSCxPQUFPLEVBQXVCLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR3BEOzs7Ozs7Ozs7O0dBVUc7QUFDSDtJQUFBO0lBZ0JBLENBQUM7SUFBRCwwQkFBQztBQUFELENBQUMsQUFoQkQsSUFnQkM7O0FBRUQ7Ozs7Ozs7Ozs7O0dBV0c7QUFRSDtJQUVFLHVCQUFZLE9BQXVCLEVBQUUsWUFBa0M7UUFDckUsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRWY7O1dBRUc7UUFDSCxJQUFNLGdCQUFnQixHQUFHLENBQUM7WUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7Z0JBQ2pCLGtCQUFrQixFQUFFLElBQUk7Z0JBQ3hCLFlBQVksRUFBRSxNQUFNO2dCQUNwQixPQUFPLEVBQUUsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDO2FBQzNCLENBQUMsQ0FBQztZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUU7Z0JBQ3RDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQzFCLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVkLElBQUksWUFBWSxFQUFFO1lBQ2hCOztlQUVHO1lBQ0gsQ0FBQztnQkFDQyxJQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBc0IsQ0FBQztnQkFDckUsTUFBTSxDQUFDLElBQUksR0FBRyx1QkFBdUIsQ0FBQztnQkFDdEMsTUFBTSxDQUFDLElBQUksR0FBRyxNQUFJLGdCQUFnQixTQUFNLENBQUM7Z0JBQ3pDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDL0QsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUVMOztlQUVHO1lBQ0gsQ0FBQyxVQUFVLE9BQWUsRUFBRSxNQUFjLEVBQUUsUUFBZ0I7Z0JBQzFELElBQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFzQixDQUFDO2dCQUNyRSxNQUFNLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDO2dCQUNoQyxNQUFNLENBQUMsR0FBRyxHQUFHLGFBQVcsUUFBUSwyQkFBc0IsT0FBTywyQkFBc0IsTUFBUSxDQUFDO2dCQUM1RixNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztnQkFDcEIsUUFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMvRCxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RFO0lBQ0gsQ0FBQztzQkExQ1UsYUFBYTtJQTRDeEI7Ozs7OztPQU1HO0lBQ1csb0JBQU0sR0FBcEIsVUFBcUIsT0FBdUIsRUFBRSxtQkFJN0M7UUFKb0Isd0JBQUEsRUFBQSxjQUF1QjtRQUFFLG9DQUFBLEVBQUE7WUFDNUMsT0FBTyxFQUFFLE9BQU87WUFDaEIsTUFBTSxFQUFFLGNBQWM7WUFDdEIsUUFBUSxFQUFFLHNCQUFzQjtTQUNqQztRQUNDLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNmLFFBQVEsRUFBRSxlQUFhO1lBQ3ZCLFNBQVMsRUFBRTtnQkFDVCxFQUFDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxRQUFRLEVBQUUsbUJBQW1CLEVBQUM7Z0JBQzdELEVBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFDO2FBQ3BEO1NBQ0YsQ0FBQyxDQUFDLENBQUM7WUFDRixRQUFRLEVBQUUsZUFBYTtTQUN4QixDQUFDO0lBQ0osQ0FBQztJQUVEOzs7O09BSUc7SUFDVyxxQkFBTyxHQUFyQixVQUFzQixtQkFJckI7UUFKcUIsb0NBQUEsRUFBQTtZQUNwQixPQUFPLEVBQUUsT0FBTztZQUNoQixNQUFNLEVBQUUsY0FBYztZQUN0QixRQUFRLEVBQUUsc0JBQXNCO1NBQ2pDO1FBQ0MsT0FBTztZQUNMLFFBQVEsRUFBRSxlQUFhO1lBQ3ZCLFNBQVMsRUFBRTtnQkFDVCxFQUFDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxRQUFRLEVBQUUsbUJBQW1CLEVBQUM7Z0JBQzdELEVBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFDO2FBQ3BEO1NBQ0YsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNXLHNCQUFRLEdBQXRCO1FBQ0UsT0FBTztZQUNMLFFBQVEsRUFBRSxlQUFhO1NBQ3hCLENBQUM7SUFDSixDQUFDOztJQTdGVSxhQUFhO1FBUHpCLFFBQVEsQ0FBQztZQUNSLFlBQVksRUFBRSxDQUFDLGdCQUFnQixDQUFDO1lBQ2hDLE9BQU8sRUFBRTtnQkFDUCxZQUFZO2FBQ2I7WUFDRCxPQUFPLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQztTQUM1QixDQUFDO2lEQUdxQixjQUFjLEVBQWlCLG1CQUFtQjtPQUY1RCxhQUFhLENBOEZ6QjtJQUFELG9CQUFDO0NBQUEsQUE5RkQsSUE4RkM7U0E5RlksYUFBYSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBkYXZpZHNoZW44NFxuICovXG5cbmltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTWF0aEpheERpcmVjdGl2ZSB9IGZyb20gJy4vbWF0aC1qYXguZGlyZWN0aXZlJztcbmltcG9ydCB7IE1hdGhKYXhTZXJ2aWNlIH0gZnJvbSAnLi9tYXRoLWpheC5zZXJ2aWNlJztcblxuXG4vKipcbiAqIE1vZHVsZSBjb25maWd1cmF0aW9uIGNsYXNzLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICoge1xuICogICB2ZXJzaW9uOiAnMi43LjUnLFxuICogICBjb25maWc6ICdUZVgtQU1TX0hUTUwnLFxuICogICBob3N0bmFtZTogJ2NkbmpzLmNsb3VkZmxhcmUuY29tJ1xuICogfVxuICovXG5leHBvcnQgY2xhc3MgTW9kdWxlQ29uZmlndXJhdGlvbiB7XG4gIC8qKlxuICAgKiBUaGUgdmVyc2lvbiBvZiB0aGUgTWF0aEpheCBsaWJyYXJ5LlxuICAgKi9cbiAgdmVyc2lvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY29uZmlnIG5hbWUgb2YgdGhlIE1hdGhKYXggbGlicmFyeS5cbiAgICogUGxlYXNlIGNoZWNrIHRoZSBNYXRoSmF4IFtkb2N1bWVudGF0aW9uXShodHRwczovL2RvY3MubWF0aGpheC5vcmcvZW4vbGF0ZXN0L2NvbmZpZy1maWxlcy5odG1sKSBmb3IgYWxsIHRoZSBjb25maWd1cmF0aW9uIG5hbWVzLlxuICAgKi9cbiAgY29uZmlnOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE1hdGhKYXggQ0ROIGhvc3RuYW1lLiBQbGVhc2UgY2hlY2sgW2hlcmVdKGh0dHBzOi8vZG9jcy5tYXRoamF4Lm9yZy9lbi9sYXRlc3Qvc3RhcnQuaHRtbCNtYXRoamF4LWNkbikgZm9yIGF2YWlsYWJsZSBDRE4gc2VydmVycy5cbiAgICovXG4gIGhvc3RuYW1lOiBzdHJpbmc7XG59XG5cbi8qKlxuICogTW9kdWxlIHRvIGxvYWQgYW5kIGNvbmZpZ3VyZSB0aGUgTWF0aEpheCBsaWJyYXJ5LlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogTWF0aEpheE1vZHVsZS5jb25maWcoXG4gKiB7XG4gKiAgICAgdmVyc2lvbjogJzIuNy41JyxcbiAqICAgICBjb25maWc6ICdUZVgtQU1TX0hUTUwnLFxuICogICAgIGhvc3RuYW1lOiAnY2RuanMuY2xvdWRmbGFyZS5jb20nXG4gKiB9KVxuICovXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtNYXRoSmF4RGlyZWN0aXZlXSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBleHBvcnRzOiBbTWF0aEpheERpcmVjdGl2ZV1cbn0pXG5leHBvcnQgY2xhc3MgTWF0aEpheE1vZHVsZSB7XG5cbiAgY29uc3RydWN0b3Ioc2VydmljZTogTWF0aEpheFNlcnZpY2UsIG1vZHVsZUNvbmZpZz86IE1vZHVsZUNvbmZpZ3VyYXRpb24pIHtcbiAgICBzZXJ2aWNlLmluaXQoKTtcblxuICAgIC8qKlxuICAgICAqIERlZmluZSB0aGUgKipmdW5jdGlvbiBzdHJpbmcqKiB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBtYXRoamF4IGNvbmZpZ3VyYXRpb24gc2NyaXB0IGJsb2NrLlxuICAgICAqL1xuICAgIGNvbnN0IG1hdGhKYXhIdWJDb25maWcgPSAoKCkgPT4ge1xuICAgICAgTWF0aEpheC5IdWIuQ29uZmlnKHtcbiAgICAgICAgc2tpcFN0YXJ0dXBUeXBlc2V0OiB0cnVlLFxuICAgICAgICBtZXNzYWdlU3R5bGU6ICdub25lJyxcbiAgICAgICAgdGV4MmpheDoge3ByZXZpZXc6ICdub25lJ31cbiAgICAgIH0pO1xuICAgICAgTWF0aEpheC5IdWIuUmVnaXN0ZXIuU3RhcnR1cEhvb2soJ0VuZCcsICgpID0+IHtcbiAgICAgICAgd2luZG93Lm1hdGhKYXhIdWIkLm5leHQoKTtcbiAgICAgICAgd2luZG93Lm1hdGhKYXhIdWIkLmNvbXBsZXRlKCk7XG4gICAgICB9KTtcbiAgICB9KS50b1N0cmluZygpO1xuXG4gICAgaWYgKG1vZHVsZUNvbmZpZykge1xuICAgICAgLyoqXG4gICAgICAgKiBJbnNlcnQgdGhlIE1hdGhKYXggY29uZmlndXJhdGlvbiBzY3JpcHQgaW50byB0aGUgSGVhZCBlbGVtZW50LlxuICAgICAgICovXG4gICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSBhcyBIVE1MU2NyaXB0RWxlbWVudDtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC94LW1hdGhqYXgtY29uZmlnJztcbiAgICAgICAgc2NyaXB0LnRleHQgPSBgKCR7bWF0aEpheEh1YkNvbmZpZ30pKCk7YDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgfSkoKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBJbnNlcnQgdGhlIHNjcmlwdCBibG9jayB0byBsb2FkIHRoZSBNYXRoSmF4IGxpYnJhcnkuXG4gICAgICAgKi9cbiAgICAgIChmdW5jdGlvbiAodmVyc2lvbjogc3RyaW5nLCBjb25maWc6IHN0cmluZywgaG9zdG5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSBhcyBIVE1MU2NyaXB0RWxlbWVudDtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LnNyYyA9IGBodHRwczovLyR7aG9zdG5hbWV9L2FqYXgvbGlicy9tYXRoamF4LyR7dmVyc2lvbn0vTWF0aEpheC5qcz9jb25maWc9JHtjb25maWd9YDtcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgfSkobW9kdWxlQ29uZmlnLnZlcnNpb24sIG1vZHVsZUNvbmZpZy5jb25maWcsIG1vZHVsZUNvbmZpZy5ob3N0bmFtZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyZSB0aGUgcHJvdmlkZXIgZm9yIGh0ZSBtb2R1bGUuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBmb3JSb290IG9yIGZvckNoaWxkIG1ldGhvZCBpbnN0ZWFkLlxuICAgKiBAcGFyYW0gZm9yUm9vdCBNYWtlIHN1cmUgaXQgaXMgc2V0IHRvIGB0cnVlYCBmb3IgdGhlIHJvb3QgbW9kdWxlIGFuZCBgZmFsc2VgIGZvciBhbnkgY2hpbGQgbW9kdWxlLlxuICAgKiBAcGFyYW0gbW9kdWxlQ29uZmlndXJhdGlvbiBBIHtNb2R1bGVDb25maWd1cmF0aW9ufSBpbnN0YW5jZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY29uZmlnKGZvclJvb3Q6IGJvb2xlYW4gPSB0cnVlLCBtb2R1bGVDb25maWd1cmF0aW9uOiBNb2R1bGVDb25maWd1cmF0aW9uID0ge1xuICAgIHZlcnNpb246ICcyLjcuNScsXG4gICAgY29uZmlnOiAnVGVYLUFNU19IVE1MJyxcbiAgICBob3N0bmFtZTogJ2NkbmpzLmNsb3VkZmxhcmUuY29tJ1xuICB9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxNYXRoSmF4TW9kdWxlPiB7XG4gICAgcmV0dXJuIGZvclJvb3QgPyB7XG4gICAgICBuZ01vZHVsZTogTWF0aEpheE1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7cHJvdmlkZTogTW9kdWxlQ29uZmlndXJhdGlvbiwgdXNlVmFsdWU6IG1vZHVsZUNvbmZpZ3VyYXRpb259LFxuICAgICAgICB7cHJvdmlkZTogTWF0aEpheFNlcnZpY2UsIHVzZUNsYXNzOiBNYXRoSmF4U2VydmljZX0sXG4gICAgICBdXG4gICAgfSA6IHtcbiAgICAgIG5nTW9kdWxlOiBNYXRoSmF4TW9kdWxlXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIG1vZHVsZSBmb3IgdGhlIHJvb3QgbW9kdWxlLlxuICAgKlxuICAgKiBAcGFyYW0gbW9kdWxlQ29uZmlndXJhdGlvbiBBIHtNb2R1bGVDb25maWd1cmF0aW9ufSBpbnN0YW5jZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZm9yUm9vdChtb2R1bGVDb25maWd1cmF0aW9uOiBNb2R1bGVDb25maWd1cmF0aW9uID0ge1xuICAgIHZlcnNpb246ICcyLjcuNScsXG4gICAgY29uZmlnOiAnVGVYLUFNU19IVE1MJyxcbiAgICBob3N0bmFtZTogJ2NkbmpzLmNsb3VkZmxhcmUuY29tJ1xuICB9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxNYXRoSmF4TW9kdWxlPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBNYXRoSmF4TW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtwcm92aWRlOiBNb2R1bGVDb25maWd1cmF0aW9uLCB1c2VWYWx1ZTogbW9kdWxlQ29uZmlndXJhdGlvbn0sXG4gICAgICAgIHtwcm92aWRlOiBNYXRoSmF4U2VydmljZSwgdXNlQ2xhc3M6IE1hdGhKYXhTZXJ2aWNlfSxcbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyZSB0aGUgbW9kdWxlIGZvciBhIGNoaWxkIG1vZHVsZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZm9yQ2hpbGQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBNYXRoSmF4TW9kdWxlXG4gICAgfTtcbiAgfVxufVxuIl19